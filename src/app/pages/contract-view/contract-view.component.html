<div class="container-fluid p-4">
    <!-- title -->
    <h6 class="mb-4">الصفحة الرئيسيه/ عرض جميع العقود/ بيانات العقد</h6>

    <div class="row justify-content-between align-items-center mb-2">
        <div class="col-md col-12">
            <h4 class="fs-20px fw-bold">بيانات العقد</h4>
        </div>
        <div class="col-md col-12">
            <div class="float-start">
                <button class="mb-3 btn btn-secondary text-white mx-1">
                    <i class="fa-solid fa-plus"></i>
                    إنشاء عقد جديد
                </button>
                <button class="mb-3 btn btn-outline-secondary mx-1">
                    <i class="fa-solid fa-code-pull-request"></i>
                    طلب عقد خارجي
                </button>
            </div>
        </div>
    </div>
    <!-- status -->
    <p class="text-secondary"><i class="fa-solid fa-circle-exclamation"></i> حالة العقد:<span
            class="text-dark mx-1">مفتوح</span></p>


    <!-- nav -->
    <div class="mb-3">
        <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs p-0 border-0 ">
            <li [ngbNavItem]="1">
                <button ngbNavLink>عقد الإيجار</button>
                <ng-template ngbNavContent>

                </ng-template>
            </li>
            <li [ngbNavItem]="2">
                <button ngbNavLink>الدفعات</button>
                <ng-template ngbNavContent>

                    <!-- buttons -->
                    <div class="bg-white p-3 row justify-content-end mb-3 mx-0 rounded rounded-1">
                        <button class="mb-3 col-auto btn btn-secondary text-white mx-1">
                            <i class="fa-solid fa-align-right"></i>
                            إغلاق عقد
                        </button>
                        <button class="mb-3 col-auto btn btn-outline-success bg-white  mx-1">
                            <i class="fa-solid fa-print"></i>
                            طباعة عقد الإيجار
                        </button>
                        <button class="mb-3 col-auto btn btn-outline-secondary mx-1">
                            <i class="fa-solid fa-pen"></i>
                            تعديل
                        </button>
                        <button class="mb-3 col-auto btn btn-outline-secondary mx-1">
                            <i class="fa-solid fa-right-left"></i>
                            مطالبة
                        </button>
                        <button class="mb-3 col-auto btn btn-outline-secondary mx-1">
                            <i class="fa-solid fa-gavel"></i>
                            مطالبة بالتعقيب
                        </button>
                    </div>

                    <!-- content -->

                    <div class="row justify-content-between mx-0">
                        <!-- table -->
                        <div class="col-md-9 col-12">
                            <div class="w-100">
                                <div class="table-responsive mb-3">
                                    <table class="table">
                                        <thead class="table-primary text-white fw-light text-center ">
                                            <tr>
                                                <th scope="col">تاريخ لإضافة</th>
                                                <th scope="col">نوع الدفعة</th>
                                                <th scope="col">القيمة</th>
                                                <th scope="col">نوع السداد</th>
                                                <th scope="col">الموظف</th>
                                                <th scope="col"></th>
                                                <th scope="col"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let item of data; let i = index">
                                                <tr class="text-center table-white border-bottom border-0"
                                                    (click)="item.isCollapsed = !item.isCollapsed"
                                                    [ngClass]="{'disabled-row': !item.isCollapsed}">
                                                    <td>{{ item.date }}</td>
                                                    <td>{{ item.type }}</td>
                                                    <td class="text-secondary text-bolder">{{ item.value }}ر.س</td>
                                                    <td>{{ item.paidType }}</td>
                                                    <td>{{ item.employee }}</td>
                                                    <td class="row">
                                                        <div
                                                            class="col-auto border border-1 border-secondary rounded rounded-1 ">
                                                            <i class="fa-solid fa-print mx-1"></i>
                                                            <i class="fa-solid fa-angle-down mx-1"
                                                                [class.fa-angle-up]="!item.isCollapsed"></i>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <i class="fa-solid fa-chevron-left"></i>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td [attr.colspan]="7">
                                                        <div #collapse="ngbCollapse" [attr.id]="'collapseExample' + i"
                                                            [ngbCollapse]="item.isCollapsed">
                                                            <div class="card bg-white border-0">
                                                                <div class="card-body ">
                                                                    <form [formGroup]="forms[i]">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-md-5">
                                                                                <div class="form-group">
                                                                                    <label for="date">تاريخ
                                                                                        الإضافة</label>
                                                                                    <input type="text" id="date"
                                                                                        class="form-control bg-light"
                                                                                        formControlName="date" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="type">نوع الدفعة</label>
                                                                                    <input type="text" id="type"
                                                                                        class="form-control bg-light"
                                                                                        formControlName="type" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="description">وصف السداد
                                                                                    </label>
                                                                                    <input type="text" id="description"
                                                                                        class="form-control bg-light"
                                                                                        formControlName="description" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="paidType">نوع
                                                                                        السداد</label>
                                                                                    <input type="text" id="paidType"
                                                                                        class="form-control bg-light"
                                                                                        formControlName="paidType" />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="value">القيمة </label>
                                                                                    <input type="text" id="value"
                                                                                        class="form-control bg-light text-secondary"
                                                                                        formControlName="value" />
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-5">

                                                                                <div class="form-group">
                                                                                    <label for="branch">فرع استلام
                                                                                        الدفعه</label>
                                                                                    <input type="text" id="branch"
                                                                                        class="form-control"
                                                                                        formControlName="branch" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="processType">نوع
                                                                                        العملية</label>
                                                                                    <input type="text" id="processType"
                                                                                        class="form-control"
                                                                                        formControlName="processType" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label
                                                                                        for="machine">الماكينه</label>
                                                                                    <input type="text" id="machine"
                                                                                        class="form-control"
                                                                                        formControlName="machine" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="num1">رقم مرجع
                                                                                        العملية</label>
                                                                                    <input type="text" id="num1"
                                                                                        class="form-control"
                                                                                        formControlName="num1" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="num2">رقم سند
                                                                                        القبض</label>
                                                                                    <input type="text" id="num2"
                                                                                        class="form-control"
                                                                                        formControlName="num2" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="employee">الموظف</label>
                                                                                    <input type="text" id="employee"
                                                                                        class="form-control"
                                                                                        formControlName="employee" />
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                    <div class="row justify-content-end mx-0">
                                        <div class="col-auto ">
                                            <button class="mb-3 btn btn-secondary text-white" (click)="addNewPayment()">
                                                <i class="fa-solid fa-plus"></i>
                                                إضافة دفعة جديدة
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row justify-content-start align-items-center mx-0 bg-white  p-3">
                                        <div class="col-md-auto mb-3 col-12">
                                            <div class="form-group">
                                                <div class="row align-items-center">
                                                    <div class="col-auto">
                                                        <label for="total">اجمالي
                                                        </label>
                                                    </div>
                                                    <div class="col-auto">
                                                        <input type="text" id="total"
                                                            class="form-control bg-white text-success"
                                                            value="570 س.ر" />

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-auto mb-3 col-12">
                                            <div class="form-group">
                                                <div class="row align-items-center">
                                                    <div class="col-auto">
                                                        <label for="total">المتبقي
                                                        </label>
                                                    </div>
                                                    <div class="col-auto">
                                                        <input type="text" id="total"
                                                            class="form-control bg-white  text-cyan" value="300 س.ر" />

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- employee info -->
                                <div class="row bg-white mx-0 p-3 mb-3">
                                    <h4 class="fs-20px fw-bold mb-3">بيانات الموظف</h4>
                                    <h6 class="mb-4 text-secondary ">بيانات موظف الفتح</h6>
                                    <div class="row">
                                        <div class="col-md-6 col-10">
                                            <div class="form-group mb-3">
                                                <label class="mb-1" for="">رقم الموظف</label>
                                                <input type="text" id="" class="form-control bg-light"
                                                    value="10144001321563" />
                                            </div>
                                            <div class="form-group mb-3 ">
                                                <label class="mb-1" for=""> إسم الموظف
                                                </label>
                                                <input type="text" id="" class="form-control bg-light"
                                                    value="محمد علي عمران جلالي" />
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- left details -->
                        <div class="col-md-3 col-12">
                            <div class="w-100">
                                <div class="row bg-white p-2">
                                    <!-- general information -->
                                    <div class="row mx-0 mb-3">
                                        <p class="mb-0">
                                            <button type="button" class="btn btn-light w-100"
                                                (click)="generalCollapse.toggle()"
                                                [attr.aria-expanded]="!generalIsCollapsed"
                                                aria-controls="generalCollapse">
                                                <div class="row justify-content-between align-items-center mx-0 px-0">
                                                    <div class="col">
                                                        <h6 class="float-end">بيانات عامة</h6>
                                                    </div>
                                                    <div class="col">
                                                        <i class="fa-solid fa-chevron-left float-start"></i>
                                                    </div>
                                                </div>
                                            </button>
                                        </p>
                                        <div class="" #generalCollapse="ngbCollapse"
                                            [(ngbCollapse)]="generalIsCollapsed">
                                            <div class="card border-0 bg-white">
                                                <div class="card-body">بيانات عامة</div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- costs -->
                                    <div class="row mx-0 mb-3">
                                        <p class="mb-0">
                                            <button type="button" class="btn btn-light w-100"
                                                (click)="costsCollapse.toggle()"
                                                [attr.aria-expanded]="!costsIsCollapsed" aria-controls="costsCollapse">
                                                <div class="row justify-content-between align-items-center mx-0 px-0">
                                                    <div class="col">
                                                        <h6 class="float-end">تكاليف</h6>
                                                    </div>
                                                    <div class="col">
                                                        <i class="fa-solid fa-chevron-left float-start"></i>
                                                    </div>
                                                </div>
                                            </button>
                                        </p>
                                        <div class="" #costsCollapse="ngbCollapse" [(ngbCollapse)]="costsIsCollapsed">
                                            <div class="card border-0 bg-white">
                                                <div class="card-body">تكاليف</div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- invoice -->
                                    <div class="row mx-0 mb-3">
                                        <p class="mb-0">
                                            <button type="button" class="btn btn-light w-100"
                                                (click)="invoiceCollapse.toggle()"
                                                [attr.aria-expanded]="!invoiceIsCollapsed"
                                                aria-controls="invoiceCollapse">
                                                <div class="row justify-content-between align-items-center mx-0 px-0">
                                                    <div class="col">
                                                        <h6 class="float-end">فاتورة</h6>
                                                    </div>
                                                    <div class="col">
                                                        <i class="fa-solid fa-chevron-left float-start"></i>
                                                    </div>
                                                </div>
                                            </button>
                                        </p>
                                        <div class="" #invoiceCollapse="ngbCollapse"
                                            [(ngbCollapse)]="invoiceIsCollapsed">
                                            <div class="card border-0 bg-white">
                                                <div class="card-body">فاتورة</div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- invoice summary -->
                                    <div class="row mx-0 mb-3">
                                        <p class="mb-0">
                                            <button type="button" class="btn btn-light w-100"
                                                (click)="invoiceSummaryCollapse.toggle()"
                                                [attr.aria-expanded]="!invoiceSummaryIsCollapsed"
                                                aria-controls="invoiceSummaryCollapse">
                                                <div class="row justify-content-between align-items-center mx-0 px-0">
                                                    <div class="col">
                                                        <h6 class="float-end">ملخص الفاتورة</h6>
                                                    </div>
                                                    <div class="col">
                                                        <i class="fa-solid fa-chevron-left float-start"></i>
                                                    </div>
                                                </div>
                                            </button>
                                        </p>
                                        <div class="" #invoiceSummaryCollapse="ngbCollapse"
                                            [(ngbCollapse)]="invoiceSummaryIsCollapsed">
                                            <div class="card border-0 bg-white">
                                                <div class="card-body">فاتورة</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                </ng-template>
            </li>
            <li [ngbNavItem]="3">
                <button ngbNavLink>تكاليف إضافية</button>
                <ng-template ngbNavContent>
                </ng-template>
            </li>
            <li [ngbNavItem]="4">
                <button ngbNavLink>خصومات</button>
                <ng-template ngbNavContent>
                </ng-template>
            </li>
            <li [ngbNavItem]="5">
                <button ngbNavLink>الفواتير الصادرة</button>
                <ng-template ngbNavContent>
                </ng-template>
            </li>
        </ul>

        <div [ngbNavOutlet]="nav" class=" bg-light border border-top-0 border-1 border-gray-200"></div>
    </div>



</div>